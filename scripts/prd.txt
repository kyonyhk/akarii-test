# Overview

**Conversationalâ€¯Prism (codename TBD)** is a live "thoughtâ€‘xâ€‘ray" layer for realâ€‘time chats and meetings.Â It exposes the hidden **beliefs, values, tradeâ€‘offs, and confidence** embedded in every line of dialogue, giving teams that care about clarity an immediate mirror of their collective reasoning.

* **Problem**Â â€“â€¯Most disagreements stem from unspoken assumptions. Traditional noteâ€‘taking or postâ€‘mortems surface content, not motive.
* **Audience**Â â€“â€¯Earlyâ€‘stage founders, decisionâ€‘heavy teams, facilitators, coachesâ€”people who bleed for clarity.
* **Value**Â â€“â€¯Faster alignment, better decisions, less political drift. "See the why while you talk."

---

# Core Features

| Feature                   | What it does                                                                 | Why it matters                                | How it works                                    |
| ------------------------- | ---------------------------------------------------------------------------- | --------------------------------------------- | ----------------------------------------------- |
| **Live Chat**             | Realâ€‘time text room (Convex)                                                 | Quick demo surface; zero install              | Convex mutation & subscription                  |
| **PrismÂ Panel**           | Streams analysis per message (statement type, belief, tradeâ€‘off, confidence) | Surfaces hidden structure instantly           | Server action calls LLM â†’ stores & streams JSON |
| **Thumb Vote**            | Users mark analysis ğŸ‘/ğŸ‘                                                    | Humanâ€‘inâ€‘loop quality metric & fineâ€‘tune data | Convex update; counts visible in UI             |
| **Magicâ€‘Link Auth**       | Clerk email links                                                            | Zeroâ€‘friction invite for pilot teams          | Clerk + Convex session integration              |
| **Review ModeÂ (stretch)** | Scrollable chat w/ inline analyses                                           | Async reflection & decision docs              | Same data, alternative view                     |

---

# User Experience

### Personas

* **Founderâ€¯Alex** â€“ running a YC seedâ€‘team; wants alignment fast.
* **Facilitatorâ€¯Mina** â€“ mediates strategic offâ€‘sites; needs live insight.

### Key Flow (MVP)

1. Alex clicks invite link â†’ magicâ€‘link auth.
2. Types a message â†’ hits enter.
3. WithinÂ â‰¤2â€¯s the PrismÂ Panel shows the inference row.
4. Team clicks ğŸ‘/ğŸ‘ if the inference resonates.
5. Conversation continues; sideâ€‘panel scrolls live.

### UI / UX Notes

* Splitâ€‘pane layout; chat left, Prism right.
* Analysis rows collapsible; click opens drawer with raw JSON.
* Latency indicator (subâ€‘2â€‘second goal) subtle in corner.
* Mobile view can hide panel for focus.

---

# Technical Architecture

* **Frontend**Â â€“â€¯Next.jsÂ 14 AppÂ Router + TailwindÂ + shadcn/ui.
* **Realâ€‘time & DB**Â â€“â€¯Convex (mutations, queries, actions).
* **LLM**Â â€“â€¯OpenAIÂ o4â€‘miniâ€‘high via server action `analyzeMessage`.
* **Auth**Â â€“â€¯Clerk magicâ€‘link; WorkOS considered postâ€‘MVP.
* **Infra**Â â€“â€¯Vercel (Next) + Convex cloud; no custom websockets.
* **Data Models**Â â€“Â `messages`, `analyses`, `convos` (see Appendix).
* **APIs**Â â€“Â `/api/generateTranscriptAnalysis` (stretch); Convex RPCs (`sendMessage`, `thumbVote`).

---

# Development Roadmap

*### PhaseÂ 0 â€“Â Scaffold*

* Repo, lint, Tailwind, shadcn.
* Convex project, schema stub.

*### PhaseÂ 1 â€“Â MVP (usable demo)*

* Live chat UI + Convex live queries.
* `analyzeMessage` action w/ OpenAI prompt.
* PrismÂ Panel streaming results.
* Clerk magicâ€‘link auth.

*### PhaseÂ 2 â€“Â Quality & Feedback*

* Thumb vote loop; store feedback.
* Prompt tuning to hit â‰¥70â€¯% ğŸ‘.
* Simple cost dashboard (token usage per team).

*### PhaseÂ 3 â€“Â Enhancements*

* Review Mode view.
* Transcript bulk endpoint.
* WorkOS SSO option.
* Belief taxonomy & search.
* Token caps & billing hooks.

---

# Logical Dependency Chain

1. **Foundations**Â â€“ Repo, Next/Tailwind, Convex schema.
2. **Core Flow**Â â€“ Live chat mutations + query subscription.
3. **Analysis Pipeline**Â â€“ `analyzeMessage` server action & OpenAI key.
4. **PrismÂ Panel UI**Â â€“ Consume merged stream. Visible value!
5. **Auth**Â â€“ Clerk integration (can slot earlier if needed).
6. **Feedback Loop**Â â€“ Thumb votes & aggregation.
7. **Secondary Views**Â â€“ Review Mode, analytics, etc.

---

# Risks and Mitigations

| Risk                              | Mitigation                                                                 |
| --------------------------------- | -------------------------------------------------------------------------- |
| LLM latency spikes                | Batch messages, cache identical lines, aggressive streaming                |
| Analysis nonsense / hallucination | Prompt guardrails + thumbsâ€‘down monitoring + â€œconfidence <Â 0.4â€ greyedâ€‘out |
| Token cost blowâ€‘up                | Track perâ€‘team usage; cap in PhaseÂ 2                                       |
| Scope creep                       | Roadmap phases keep MVP atomic; parkingâ€‘lot extras                         |
| Convex lockâ€‘in                    | Abstract repo layer; data export script early                              |

---

# Appendix

* **Version history table** (kept from previous doc).
* **Data models (TS)** snippet (above).
* **Prompt sketch**: `SYSTEM: Socratic Analystâ€¦`.
* **Open questions**: taxonomy, privacy, SSO, pricing.
* **Research**: links to â€œclarity toolsâ€ landscape, YC founder interviews (to be added).
